/*
 * Copyright (C) 2016 necropotame (necropotame@gmail.com)
 * 
 * This file is part of TeeUniverse.
 * 
 * TeeUniverse is free software: you can redistribute it and/or  modify
 * it under the terms of the GNU Affero General Public License, version 3,
 * as published by the Free Software Foundation.
 *
 * TeeUniverse is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with TeeUniverse.  If not, see <http://www.gnu.org/licenses/>.
 */

/*
 * THIS FILE HAS BEEN GENERATED BY A SCRIPT.
 * DO NOT EDIT MANUALLY!
 *
 * Please use the script "scripts/assets/assets.py" to regenerate it.
 *
 * Why this file is generated by a script?
 * Because there is more than 10 files that follow the same format.
 * In addition, each time a new member is added, enums, getter, setters,
 * copy/transfert functions and storage structure must be updated.
 * It's too much to avoid mistakes.
 */

#ifndef __CLIENT_ASSETS_SKELETONANIMATION__
#define __CLIENT_ASSETS_SKELETONANIMATION__

#include <shared/assets/asset.h>
#include <cassert>
#include <vector>
#include <shared/assets/assetpath.h>
#include <shared/tl/algorithm.h>

class CAsset_SkeletonAnimation : public CAsset
{
public:
	enum
	{
		TIMESTEP = 30,
	};
	
	enum
	{
		CYCLETYPE_CLAMP = 0,
		CYCLETYPE_LOOP,
		NUM_CYCLETYPES,
	};
	
	enum
	{
		LAYERSTATE_VISIBLE = 0,
		LAYERSTATE_HIDDEN,
		NUM_LAYERSTATES,
	};
	
	enum
	{
		BONEALIGN_PARENTBONE = 0,
		BONEALIGN_WORLD,
		BONEALIGN_AIM,
		BONEALIGN_MOTION,
		BONEALIGN_HOOK,
		NUM_BONEALIGNS,
	};
	
	static const int TypeId = 23;
	
	enum
	{
		TYPE_LOCALBONEANIM_KEYFRAME,
		TYPE_LOCALBONEANIM,
		TYPE_PARENTBONEANIM_KEYFRAME,
		TYPE_PARENTBONEANIM,
		TYPE_LAYERANIMATION_KEYFRAME,
		TYPE_LAYERANIMATION,
	};
	
	static inline CSubPath SubPath_LocalBoneAnimKeyFrame(int Id0, int Id1) { return CSubPath(TYPE_LOCALBONEANIM_KEYFRAME, Id0, Id1, 0); }
	static inline CSubPath SubPath_LocalBoneAnim(int Id0) { return CSubPath(TYPE_LOCALBONEANIM, Id0, 0, 0); }
	static inline CSubPath SubPath_ParentBoneAnimKeyFrame(int Id0, int Id1) { return CSubPath(TYPE_PARENTBONEANIM_KEYFRAME, Id0, Id1, 0); }
	static inline CSubPath SubPath_ParentBoneAnim(int Id0) { return CSubPath(TYPE_PARENTBONEANIM, Id0, 0, 0); }
	static inline CSubPath SubPath_LayerAnimationKeyFrame(int Id0, int Id1) { return CSubPath(TYPE_LAYERANIMATION_KEYFRAME, Id0, Id1, 0); }
	static inline CSubPath SubPath_LayerAnimation(int Id0) { return CSubPath(TYPE_LAYERANIMATION, Id0, 0, 0); }
	
	enum
	{
		NAME = CAsset::NAME,
		SKELETONPATH,
		LOCALBONEANIM_ARRAYSIZE,
		LOCALBONEANIM_PTR,
		LOCALBONEANIM_ARRAY,
		LOCALBONEANIM_KEYFRAME_ARRAYSIZE,
		LOCALBONEANIM_KEYFRAME_PTR,
		LOCALBONEANIM_KEYFRAME_ARRAY,
		LOCALBONEANIM_KEYFRAME,
		LOCALBONEANIM_KEYFRAME_TIME,
		LOCALBONEANIM_BONEPATH,
		LOCALBONEANIM_CYCLETYPE,
		LOCALBONEANIM,
		PARENTBONEANIM_ARRAYSIZE,
		PARENTBONEANIM_PTR,
		PARENTBONEANIM_ARRAY,
		PARENTBONEANIM_KEYFRAME_ARRAYSIZE,
		PARENTBONEANIM_KEYFRAME_PTR,
		PARENTBONEANIM_KEYFRAME_ARRAY,
		PARENTBONEANIM_KEYFRAME,
		PARENTBONEANIM_KEYFRAME_TIME,
		PARENTBONEANIM_BONEPATH,
		PARENTBONEANIM_CYCLETYPE,
		PARENTBONEANIM,
		LAYERANIMATION_ARRAYSIZE,
		LAYERANIMATION_PTR,
		LAYERANIMATION_ARRAY,
		LAYERANIMATION_KEYFRAME_ARRAYSIZE,
		LAYERANIMATION_KEYFRAME_PTR,
		LAYERANIMATION_KEYFRAME_ARRAY,
		LAYERANIMATION_KEYFRAME,
		LAYERANIMATION_KEYFRAME_TIME,
		LAYERANIMATION_LAYERPATH,
		LAYERANIMATION_CYCLETYPE,
		LAYERANIMATION,
	};
	
	class CIteratorLocalBoneAnim
	{
	protected:
		int m_Index;
		bool m_Reverse;
	public:
		CIteratorLocalBoneAnim() : m_Index(0), m_Reverse(false) {}
		CIteratorLocalBoneAnim(int Index, bool Reverse) : m_Index(Index), m_Reverse(Reverse) {}
		CIteratorLocalBoneAnim& operator++() { if(m_Reverse) m_Index--; else m_Index++; return *this; }
		CSubPath operator*() { return SubPath_LocalBoneAnim(m_Index); }
		bool operator==(const CIteratorLocalBoneAnim& Iter2) { return Iter2.m_Index == m_Index; }
		bool operator!=(const CIteratorLocalBoneAnim& Iter2) { return Iter2.m_Index != m_Index; }
	};
	
	CIteratorLocalBoneAnim BeginLocalBoneAnim() const { return CIteratorLocalBoneAnim(0, false); }
	CIteratorLocalBoneAnim EndLocalBoneAnim() const { return CIteratorLocalBoneAnim(m_LocalBoneAnim.size(), false); }
	CIteratorLocalBoneAnim ReverseBeginLocalBoneAnim() const { return CIteratorLocalBoneAnim(m_LocalBoneAnim.size()-1, true); }
	CIteratorLocalBoneAnim ReverseEndLocalBoneAnim() const { return CIteratorLocalBoneAnim(-1, true); }
	
	class CIteratorParentBoneAnim
	{
	protected:
		int m_Index;
		bool m_Reverse;
	public:
		CIteratorParentBoneAnim() : m_Index(0), m_Reverse(false) {}
		CIteratorParentBoneAnim(int Index, bool Reverse) : m_Index(Index), m_Reverse(Reverse) {}
		CIteratorParentBoneAnim& operator++() { if(m_Reverse) m_Index--; else m_Index++; return *this; }
		CSubPath operator*() { return SubPath_ParentBoneAnim(m_Index); }
		bool operator==(const CIteratorParentBoneAnim& Iter2) { return Iter2.m_Index == m_Index; }
		bool operator!=(const CIteratorParentBoneAnim& Iter2) { return Iter2.m_Index != m_Index; }
	};
	
	CIteratorParentBoneAnim BeginParentBoneAnim() const { return CIteratorParentBoneAnim(0, false); }
	CIteratorParentBoneAnim EndParentBoneAnim() const { return CIteratorParentBoneAnim(m_ParentBoneAnim.size(), false); }
	CIteratorParentBoneAnim ReverseBeginParentBoneAnim() const { return CIteratorParentBoneAnim(m_ParentBoneAnim.size()-1, true); }
	CIteratorParentBoneAnim ReverseEndParentBoneAnim() const { return CIteratorParentBoneAnim(-1, true); }
	
	class CIteratorLayerAnimation
	{
	protected:
		int m_Index;
		bool m_Reverse;
	public:
		CIteratorLayerAnimation() : m_Index(0), m_Reverse(false) {}
		CIteratorLayerAnimation(int Index, bool Reverse) : m_Index(Index), m_Reverse(Reverse) {}
		CIteratorLayerAnimation& operator++() { if(m_Reverse) m_Index--; else m_Index++; return *this; }
		CSubPath operator*() { return SubPath_LayerAnimation(m_Index); }
		bool operator==(const CIteratorLayerAnimation& Iter2) { return Iter2.m_Index == m_Index; }
		bool operator!=(const CIteratorLayerAnimation& Iter2) { return Iter2.m_Index != m_Index; }
	};
	
	CIteratorLayerAnimation BeginLayerAnimation() const { return CIteratorLayerAnimation(0, false); }
	CIteratorLayerAnimation EndLayerAnimation() const { return CIteratorLayerAnimation(m_LayerAnimation.size(), false); }
	CIteratorLayerAnimation ReverseBeginLayerAnimation() const { return CIteratorLayerAnimation(m_LayerAnimation.size()-1, true); }
	CIteratorLayerAnimation ReverseEndLayerAnimation() const { return CIteratorLayerAnimation(-1, true); }
	
	class CBoneAnimation
	{
	public:
		class CFrame
		{
		public:
			class CTuaType_0_1_0
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_1_0& TuaType);
			};
			
			class CTuaType_0_2_0
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_2_0& TuaType);
			};
			
			class CTuaType_0_2_1
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_2_1& TuaType);
			};
			
			class CTuaType_0_2_2
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_2_2& TuaType);
			};
			
			class CTuaType_0_2_3
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_2_3& TuaType);
			};
			
			class CTuaType_0_2_4
			{
			public:
				CTuaVec2 m_Translation;
				CTuaVec2 m_Scale;
				tua_float m_Angle;
				tua_int32 m_Alignment;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CFrame& SysType, CTuaType_0_2_4& TuaType);
			};
			
		
		private:
			vec2 m_Translation;
			vec2 m_Scale;
			float m_Angle;
			int m_Alignment;
		
		public:
			CFrame();
			inline vec2 GetTranslation() const { return m_Translation; }
			
			inline float GetTranslationX() const { return m_Translation.x; }
			
			inline float GetTranslationY() const { return m_Translation.y; }
			
			inline vec2 GetScale() const { return m_Scale; }
			
			inline float GetScaleX() const { return m_Scale.x; }
			
			inline float GetScaleY() const { return m_Scale.y; }
			
			inline float GetAngle() const { return m_Angle; }
			
			inline int GetAlignment() const { return m_Alignment; }
			
			inline void SetTranslation(vec2 Value) { m_Translation = Value; }
			
			inline void SetTranslationX(float Value) { m_Translation.x = Value; }
			
			inline void SetTranslationY(float Value) { m_Translation.y = Value; }
			
			inline void SetScale(vec2 Value) { m_Scale = Value; }
			
			inline void SetScaleX(float Value) { m_Scale.x = Value; }
			
			inline void SetScaleY(float Value) { m_Scale.y = Value; }
			
			inline void SetAngle(float Value) { m_Angle = Value; }
			
			inline void SetAlignment(int Value) { m_Alignment = Value; }
			
			void AssetPathOperation(const CAssetPath::COperation& Operation)
			{
			}
			
		};
		class CKeyFrame : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame
		{
		public:
			class CTuaType_0_1_0 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_1_0
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_1_0& TuaType);
			};
			
			class CTuaType_0_2_0 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_2_0
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_2_0& TuaType);
			};
			
			class CTuaType_0_2_1 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_2_1
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_2_1& TuaType);
			};
			
			class CTuaType_0_2_2 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_2_2
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_2_2& TuaType);
			};
			
			class CTuaType_0_2_3 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_2_3
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_2_3& TuaType);
			};
			
			class CTuaType_0_2_4 : public CAsset_SkeletonAnimation::CBoneAnimation::CFrame::CTuaType_0_2_4
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& SysType, CTuaType_0_2_4& TuaType);
			};
			
		
		private:
			int m_Time;
		
		public:
			CKeyFrame();
			inline int GetTime() const { return m_Time; }
			
			inline void SetTime(int Value) { m_Time = Value; }
			
			void AssetPathOperation(const CAssetPath::COperation& Operation)
			{
			}
			
		};
		class CTuaType_0_1_0
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_1_0& TuaType);
		};
		
		class CTuaType_0_2_0
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_2_0& TuaType);
		};
		
		class CTuaType_0_2_1
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_2_1& TuaType);
		};
		
		class CTuaType_0_2_2
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_2_2& TuaType);
		};
		
		class CTuaType_0_2_3
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_2_3& TuaType);
		};
		
		class CTuaType_0_2_4
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_BonePath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CBoneAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CBoneAnimation& SysType, CTuaType_0_2_4& TuaType);
		};
		
	
	private:
		std::vector<CBoneAnimation::CKeyFrame> m_KeyFrame;
		CSubPath m_BonePath;
		int m_CycleType;
	
	public:
		float GetDuration() const;
		int IntTimeToKeyFrame(int IntTime) const;
		int TimeToKeyFrame(float Time) const;
		bool GetFrame(float Time, CFrame& Frame) const;
		CBoneAnimation();
		inline int GetKeyFrameArraySize() const { return m_KeyFrame.size(); }
		
		inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame* GetKeyFramePtr() const { return &(m_KeyFrame.front()); }
		
		inline const std::vector<CBoneAnimation::CKeyFrame>& GetKeyFrameArray() const { return m_KeyFrame; }
		inline std::vector<CBoneAnimation::CKeyFrame>& GetKeyFrameArray() { return m_KeyFrame; }
		
		inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& GetKeyFrame(const CSubPath& SubPath) const
		{
			assert(SubPath.GetId() < m_KeyFrame.size());
			{
				return m_KeyFrame[SubPath.GetId()];
			}
		}
		
		inline int GetKeyFrameTime(const CSubPath& SubPath) const
		{
			if(SubPath.GetId() < m_KeyFrame.size())
				return m_KeyFrame[SubPath.GetId()].GetTime();
			else return 0;
		}
		
		inline CSubPath GetBonePath() const { return m_BonePath; }
		
		inline int GetCycleType() const { return m_CycleType; }
		
		inline void SetKeyFrameArraySize(int Value) { m_KeyFrame.resize(Value); }
		
		inline void SetKeyFrame(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& Value)
		{
			if(SubPath.GetId() < m_KeyFrame.size())
			{
				m_KeyFrame[SubPath.GetId()] = Value;
			}
		}
		
		inline void SetKeyFrameTime(const CSubPath& SubPath, int Value)
		{
			if(SubPath.GetId() < m_KeyFrame.size())
				m_KeyFrame[SubPath.GetId()].SetTime(Value);
		}
		
		inline void SetBonePath(const CSubPath& Value) { m_BonePath = Value; }
		
		inline void SetCycleType(int Value) { m_CycleType = Value; }
		
		inline int AddKeyFrame()
		{
			int Id = m_KeyFrame.size();
			m_KeyFrame.emplace_back();
			return Id;
		}
		
		inline void AddAtKeyFrame(int Index) { m_KeyFrame.insert(m_KeyFrame.begin() + Index, CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame()); }
		
		inline void DeleteKeyFrame(const CSubPath& SubPath) { m_KeyFrame.erase(m_KeyFrame.begin() + SubPath.GetId()); }
		
		inline void RelMoveKeyFrame(const CSubPath& SubPath, int RelMove) { relative_move(m_KeyFrame, SubPath.GetId(), RelMove); }
		
		inline bool IsValidKeyFrame(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_KeyFrame.size()); }
		
		void AssetPathOperation(const CAssetPath::COperation& Operation)
		{
			for(unsigned int i=0; i<m_KeyFrame.size(); i++)
			{
				m_KeyFrame[i].AssetPathOperation(Operation);
			}
		}
		
	};
	class CLayerAnimation
	{
	public:
		class CFrame
		{
		public:
			class CTuaType_0_1_0
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_1_0& TuaType);
			};
			
			class CTuaType_0_2_0
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_2_0& TuaType);
			};
			
			class CTuaType_0_2_1
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_2_1& TuaType);
			};
			
			class CTuaType_0_2_2
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_2_2& TuaType);
			};
			
			class CTuaType_0_2_3
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_2_3& TuaType);
			};
			
			class CTuaType_0_2_4
			{
			public:
				tua_uint32 m_Color;
				tua_int32 m_State;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CFrame& SysType, CTuaType_0_2_4& TuaType);
			};
			
		
		private:
			vec4 m_Color;
			int m_State;
		
		public:
			CFrame();
			inline vec4 GetColor() const { return m_Color; }
			
			inline int GetState() const { return m_State; }
			
			inline void SetColor(vec4 Value) { m_Color = Value; }
			
			inline void SetState(int Value) { m_State = Value; }
			
			void AssetPathOperation(const CAssetPath::COperation& Operation)
			{
			}
			
		};
		class CKeyFrame : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame
		{
		public:
			class CTuaType_0_1_0 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_1_0
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_1_0& TuaType);
			};
			
			class CTuaType_0_2_0 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_2_0
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_2_0& TuaType);
			};
			
			class CTuaType_0_2_1 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_2_1
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_2_1& TuaType);
			};
			
			class CTuaType_0_2_2 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_2_2
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_2_2& TuaType);
			};
			
			class CTuaType_0_2_3 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_2_3
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_2_3& TuaType);
			};
			
			class CTuaType_0_2_4 : public CAsset_SkeletonAnimation::CLayerAnimation::CFrame::CTuaType_0_2_4
			{
			public:
				tua_int32 m_Time;
				static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType);
				static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& SysType, CTuaType_0_2_4& TuaType);
			};
			
		
		private:
			int m_Time;
		
		public:
			CKeyFrame();
			inline int GetTime() const { return m_Time; }
			
			inline void SetTime(int Value) { m_Time = Value; }
			
			void AssetPathOperation(const CAssetPath::COperation& Operation)
			{
			}
			
		};
		class CTuaType_0_1_0
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_1_0& TuaType);
		};
		
		class CTuaType_0_2_0
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_2_0& TuaType);
		};
		
		class CTuaType_0_2_1
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_2_1& TuaType);
		};
		
		class CTuaType_0_2_2
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_2_2& TuaType);
		};
		
		class CTuaType_0_2_3
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_2_3& TuaType);
		};
		
		class CTuaType_0_2_4
		{
		public:
			CTuaArray m_KeyFrame;
			CSubPath::CTuaType m_LayerPath;
			tua_int32 m_CycleType;
			static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation::CLayerAnimation& SysType);
			static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation::CLayerAnimation& SysType, CTuaType_0_2_4& TuaType);
		};
		
	
	private:
		std::vector<CLayerAnimation::CKeyFrame> m_KeyFrame;
		CSubPath m_LayerPath;
		int m_CycleType;
	
	public:
		float GetDuration() const;
		int IntTimeToKeyFrame(int IntTime) const;
		int TimeToKeyFrame(float Time) const;
		bool GetFrame(float Time, CFrame& Frame) const;
		CLayerAnimation();
		inline int GetKeyFrameArraySize() const { return m_KeyFrame.size(); }
		
		inline const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame* GetKeyFramePtr() const { return &(m_KeyFrame.front()); }
		
		inline const std::vector<CLayerAnimation::CKeyFrame>& GetKeyFrameArray() const { return m_KeyFrame; }
		inline std::vector<CLayerAnimation::CKeyFrame>& GetKeyFrameArray() { return m_KeyFrame; }
		
		inline const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& GetKeyFrame(const CSubPath& SubPath) const
		{
			assert(SubPath.GetId() < m_KeyFrame.size());
			{
				return m_KeyFrame[SubPath.GetId()];
			}
		}
		
		inline int GetKeyFrameTime(const CSubPath& SubPath) const
		{
			if(SubPath.GetId() < m_KeyFrame.size())
				return m_KeyFrame[SubPath.GetId()].GetTime();
			else return 0;
		}
		
		inline CSubPath GetLayerPath() const { return m_LayerPath; }
		
		inline int GetCycleType() const { return m_CycleType; }
		
		inline void SetKeyFrameArraySize(int Value) { m_KeyFrame.resize(Value); }
		
		inline void SetKeyFrame(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& Value)
		{
			if(SubPath.GetId() < m_KeyFrame.size())
			{
				m_KeyFrame[SubPath.GetId()] = Value;
			}
		}
		
		inline void SetKeyFrameTime(const CSubPath& SubPath, int Value)
		{
			if(SubPath.GetId() < m_KeyFrame.size())
				m_KeyFrame[SubPath.GetId()].SetTime(Value);
		}
		
		inline void SetLayerPath(const CSubPath& Value) { m_LayerPath = Value; }
		
		inline void SetCycleType(int Value) { m_CycleType = Value; }
		
		inline int AddKeyFrame()
		{
			int Id = m_KeyFrame.size();
			m_KeyFrame.emplace_back();
			return Id;
		}
		
		inline void AddAtKeyFrame(int Index) { m_KeyFrame.insert(m_KeyFrame.begin() + Index, CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame()); }
		
		inline void DeleteKeyFrame(const CSubPath& SubPath) { m_KeyFrame.erase(m_KeyFrame.begin() + SubPath.GetId()); }
		
		inline void RelMoveKeyFrame(const CSubPath& SubPath, int RelMove) { relative_move(m_KeyFrame, SubPath.GetId(), RelMove); }
		
		inline bool IsValidKeyFrame(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_KeyFrame.size()); }
		
		void AssetPathOperation(const CAssetPath::COperation& Operation)
		{
			for(unsigned int i=0; i<m_KeyFrame.size(); i++)
			{
				m_KeyFrame[i].AssetPathOperation(Operation);
			}
		}
		
	};
	class CTuaType_0_1_0 : public CAsset::CTuaType_0_1_0
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_1_0& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_1_0& TuaType);
	};
	
	class CTuaType_0_2_0 : public CAsset::CTuaType_0_2_0
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_0& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_2_0& TuaType);
	};
	
	class CTuaType_0_2_1 : public CAsset::CTuaType_0_2_1
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_1& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_2_1& TuaType);
	};
	
	class CTuaType_0_2_2 : public CAsset::CTuaType_0_2_2
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_2& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_2_2& TuaType);
	};
	
	class CTuaType_0_2_3 : public CAsset::CTuaType_0_2_3
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_3& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_2_3& TuaType);
	};
	
	class CTuaType_0_2_4 : public CAsset::CTuaType_0_2_4
	{
	public:
		CAssetPath::CTuaType m_SkeletonPath;
		CTuaArray m_LocalBoneAnim;
		CTuaArray m_ParentBoneAnim;
		CTuaArray m_LayerAnimation;
		static void Read(class CAssetsSaveLoadContext* pLoadingContext, const CTuaType_0_2_4& TuaType, CAsset_SkeletonAnimation& SysType);
		static void Write(class CAssetsSaveLoadContext* pLoadingContext, const CAsset_SkeletonAnimation& SysType, CTuaType_0_2_4& TuaType);
	};
	

private:
	CAssetPath m_SkeletonPath;
	std::vector<CAsset_SkeletonAnimation::CBoneAnimation> m_LocalBoneAnim;
	std::vector<CAsset_SkeletonAnimation::CBoneAnimation> m_ParentBoneAnim;
	std::vector<CAsset_SkeletonAnimation::CLayerAnimation> m_LayerAnimation;

public:
	bool GetLocalBoneAnimFrame(int Id, float Time, CBoneAnimation::CFrame& Frame) const;
	bool GetParentBoneAnimFrame(int Id, float Time, CBoneAnimation::CFrame& Frame) const;
	bool GetLayerAnimFrame(int Id, float Time, CLayerAnimation::CFrame& Frame) const;
	virtual ~CAsset_SkeletonAnimation() {}
	
	template<typename T>
	T GetValue(int ValueType, const CSubPath& SubPath, T DefaultValue) const
	{
		return CAsset::GetValue<T>(ValueType, SubPath, DefaultValue);
	}
	
	template<typename T>
	bool SetValue(int ValueType, const CSubPath& SubPath, T Value)
	{
		return CAsset::SetValue<T>(ValueType, SubPath, Value);
	}
	
	int AddSubItem(int Type, const CSubPath& SubPath);
	
	int AddSubItemAt(int Type, const CSubPath& SubPath, int Index);
	
	void DeleteSubItem(const CSubPath& SubPath);
	
	void RelMoveSubItem(const CSubPath& SubPath, int RelMove);
	
	inline CAssetPath GetSkeletonPath() const { return m_SkeletonPath; }
	
	inline int GetLocalBoneAnimArraySize() const { return m_LocalBoneAnim.size(); }
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation* GetLocalBoneAnimPtr() const { return &(m_LocalBoneAnim.front()); }
	
	inline const std::vector<CAsset_SkeletonAnimation::CBoneAnimation>& GetLocalBoneAnimArray() const { return m_LocalBoneAnim; }
	inline std::vector<CAsset_SkeletonAnimation::CBoneAnimation>& GetLocalBoneAnimArray() { return m_LocalBoneAnim; }
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation& GetLocalBoneAnim(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LocalBoneAnim.size());
		{
			return m_LocalBoneAnim[SubPath.GetId()];
		}
	}
	
	inline int GetLocalBoneAnimKeyFrameArraySize(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			return m_LocalBoneAnim[SubPath.GetId()].GetKeyFrameArraySize();
		else return 0;
	}
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame* GetLocalBoneAnimKeyFramePtr(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			return m_LocalBoneAnim[SubPath.GetId()].GetKeyFramePtr();
		else return NULL;
	}
	
	inline const std::vector<CBoneAnimation::CKeyFrame>& GetLocalBoneAnimKeyFrameArray(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LocalBoneAnim.size());
		return m_LocalBoneAnim[SubPath.GetId()].GetKeyFrameArray();
	}
	inline std::vector<CBoneAnimation::CKeyFrame>& GetLocalBoneAnimKeyFrameArray(const CSubPath& SubPath)
	{
		assert(SubPath.GetId() < m_LocalBoneAnim.size());
		return m_LocalBoneAnim[SubPath.GetId()].GetKeyFrameArray();
	}
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& GetLocalBoneAnimKeyFrame(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LocalBoneAnim.size());
		return m_LocalBoneAnim[SubPath.GetId()].GetKeyFrame(SubPath.PopId());
	}
	
	inline int GetLocalBoneAnimKeyFrameTime(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			return m_LocalBoneAnim[SubPath.GetId()].GetKeyFrameTime(SubPath.PopId());
		else return 0;
	}
	
	inline CSubPath GetLocalBoneAnimBonePath(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			return m_LocalBoneAnim[SubPath.GetId()].GetBonePath();
		else return CSubPath::Null();
	}
	
	inline int GetLocalBoneAnimCycleType(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			return m_LocalBoneAnim[SubPath.GetId()].GetCycleType();
		else return 0;
	}
	
	inline int GetParentBoneAnimArraySize() const { return m_ParentBoneAnim.size(); }
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation* GetParentBoneAnimPtr() const { return &(m_ParentBoneAnim.front()); }
	
	inline const std::vector<CAsset_SkeletonAnimation::CBoneAnimation>& GetParentBoneAnimArray() const { return m_ParentBoneAnim; }
	inline std::vector<CAsset_SkeletonAnimation::CBoneAnimation>& GetParentBoneAnimArray() { return m_ParentBoneAnim; }
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation& GetParentBoneAnim(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_ParentBoneAnim.size());
		{
			return m_ParentBoneAnim[SubPath.GetId()];
		}
	}
	
	inline int GetParentBoneAnimKeyFrameArraySize(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			return m_ParentBoneAnim[SubPath.GetId()].GetKeyFrameArraySize();
		else return 0;
	}
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame* GetParentBoneAnimKeyFramePtr(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			return m_ParentBoneAnim[SubPath.GetId()].GetKeyFramePtr();
		else return NULL;
	}
	
	inline const std::vector<CBoneAnimation::CKeyFrame>& GetParentBoneAnimKeyFrameArray(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_ParentBoneAnim.size());
		return m_ParentBoneAnim[SubPath.GetId()].GetKeyFrameArray();
	}
	inline std::vector<CBoneAnimation::CKeyFrame>& GetParentBoneAnimKeyFrameArray(const CSubPath& SubPath)
	{
		assert(SubPath.GetId() < m_ParentBoneAnim.size());
		return m_ParentBoneAnim[SubPath.GetId()].GetKeyFrameArray();
	}
	
	inline const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& GetParentBoneAnimKeyFrame(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_ParentBoneAnim.size());
		return m_ParentBoneAnim[SubPath.GetId()].GetKeyFrame(SubPath.PopId());
	}
	
	inline int GetParentBoneAnimKeyFrameTime(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			return m_ParentBoneAnim[SubPath.GetId()].GetKeyFrameTime(SubPath.PopId());
		else return 0;
	}
	
	inline CSubPath GetParentBoneAnimBonePath(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			return m_ParentBoneAnim[SubPath.GetId()].GetBonePath();
		else return CSubPath::Null();
	}
	
	inline int GetParentBoneAnimCycleType(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			return m_ParentBoneAnim[SubPath.GetId()].GetCycleType();
		else return 0;
	}
	
	inline int GetLayerAnimationArraySize() const { return m_LayerAnimation.size(); }
	
	inline const CAsset_SkeletonAnimation::CLayerAnimation* GetLayerAnimationPtr() const { return &(m_LayerAnimation.front()); }
	
	inline const std::vector<CAsset_SkeletonAnimation::CLayerAnimation>& GetLayerAnimationArray() const { return m_LayerAnimation; }
	inline std::vector<CAsset_SkeletonAnimation::CLayerAnimation>& GetLayerAnimationArray() { return m_LayerAnimation; }
	
	inline const CAsset_SkeletonAnimation::CLayerAnimation& GetLayerAnimation(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LayerAnimation.size());
		{
			return m_LayerAnimation[SubPath.GetId()];
		}
	}
	
	inline int GetLayerAnimationKeyFrameArraySize(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			return m_LayerAnimation[SubPath.GetId()].GetKeyFrameArraySize();
		else return 0;
	}
	
	inline const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame* GetLayerAnimationKeyFramePtr(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			return m_LayerAnimation[SubPath.GetId()].GetKeyFramePtr();
		else return NULL;
	}
	
	inline const std::vector<CLayerAnimation::CKeyFrame>& GetLayerAnimationKeyFrameArray(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LayerAnimation.size());
		return m_LayerAnimation[SubPath.GetId()].GetKeyFrameArray();
	}
	inline std::vector<CLayerAnimation::CKeyFrame>& GetLayerAnimationKeyFrameArray(const CSubPath& SubPath)
	{
		assert(SubPath.GetId() < m_LayerAnimation.size());
		return m_LayerAnimation[SubPath.GetId()].GetKeyFrameArray();
	}
	
	inline const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& GetLayerAnimationKeyFrame(const CSubPath& SubPath) const
	{
		assert(SubPath.GetId() < m_LayerAnimation.size());
		return m_LayerAnimation[SubPath.GetId()].GetKeyFrame(SubPath.PopId());
	}
	
	inline int GetLayerAnimationKeyFrameTime(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			return m_LayerAnimation[SubPath.GetId()].GetKeyFrameTime(SubPath.PopId());
		else return 0;
	}
	
	inline CSubPath GetLayerAnimationLayerPath(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			return m_LayerAnimation[SubPath.GetId()].GetLayerPath();
		else return CSubPath::Null();
	}
	
	inline int GetLayerAnimationCycleType(const CSubPath& SubPath) const
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			return m_LayerAnimation[SubPath.GetId()].GetCycleType();
		else return 0;
	}
	
	inline void SetSkeletonPath(const CAssetPath& Value) { m_SkeletonPath = Value; }
	
	inline void SetLocalBoneAnimArraySize(int Value) { m_LocalBoneAnim.resize(Value); }
	
	inline void SetLocalBoneAnim(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CBoneAnimation& Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
		{
			m_LocalBoneAnim[SubPath.GetId()] = Value;
		}
	}
	
	inline void SetLocalBoneAnimKeyFrameArraySize(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			m_LocalBoneAnim[SubPath.GetId()].SetKeyFrameArraySize(Value);
	}
	
	inline void SetLocalBoneAnimKeyFrame(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			m_LocalBoneAnim[SubPath.GetId()].SetKeyFrame(SubPath.PopId(), Value);
	}
	
	inline void SetLocalBoneAnimKeyFrameTime(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			m_LocalBoneAnim[SubPath.GetId()].SetKeyFrameTime(SubPath.PopId(), Value);
	}
	
	inline void SetLocalBoneAnimBonePath(const CSubPath& SubPath, const CSubPath& Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			m_LocalBoneAnim[SubPath.GetId()].SetBonePath(Value);
	}
	
	inline void SetLocalBoneAnimCycleType(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LocalBoneAnim.size())
			m_LocalBoneAnim[SubPath.GetId()].SetCycleType(Value);
	}
	
	inline void SetParentBoneAnimArraySize(int Value) { m_ParentBoneAnim.resize(Value); }
	
	inline void SetParentBoneAnim(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CBoneAnimation& Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
		{
			m_ParentBoneAnim[SubPath.GetId()] = Value;
		}
	}
	
	inline void SetParentBoneAnimKeyFrameArraySize(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			m_ParentBoneAnim[SubPath.GetId()].SetKeyFrameArraySize(Value);
	}
	
	inline void SetParentBoneAnimKeyFrame(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CBoneAnimation::CKeyFrame& Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			m_ParentBoneAnim[SubPath.GetId()].SetKeyFrame(SubPath.PopId(), Value);
	}
	
	inline void SetParentBoneAnimKeyFrameTime(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			m_ParentBoneAnim[SubPath.GetId()].SetKeyFrameTime(SubPath.PopId(), Value);
	}
	
	inline void SetParentBoneAnimBonePath(const CSubPath& SubPath, const CSubPath& Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			m_ParentBoneAnim[SubPath.GetId()].SetBonePath(Value);
	}
	
	inline void SetParentBoneAnimCycleType(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_ParentBoneAnim.size())
			m_ParentBoneAnim[SubPath.GetId()].SetCycleType(Value);
	}
	
	inline void SetLayerAnimationArraySize(int Value) { m_LayerAnimation.resize(Value); }
	
	inline void SetLayerAnimation(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CLayerAnimation& Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
		{
			m_LayerAnimation[SubPath.GetId()] = Value;
		}
	}
	
	inline void SetLayerAnimationKeyFrameArraySize(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			m_LayerAnimation[SubPath.GetId()].SetKeyFrameArraySize(Value);
	}
	
	inline void SetLayerAnimationKeyFrame(const CSubPath& SubPath, const CAsset_SkeletonAnimation::CLayerAnimation::CKeyFrame& Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			m_LayerAnimation[SubPath.GetId()].SetKeyFrame(SubPath.PopId(), Value);
	}
	
	inline void SetLayerAnimationKeyFrameTime(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			m_LayerAnimation[SubPath.GetId()].SetKeyFrameTime(SubPath.PopId(), Value);
	}
	
	inline void SetLayerAnimationLayerPath(const CSubPath& SubPath, const CSubPath& Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			m_LayerAnimation[SubPath.GetId()].SetLayerPath(Value);
	}
	
	inline void SetLayerAnimationCycleType(const CSubPath& SubPath, int Value)
	{
		if(SubPath.GetId() < m_LayerAnimation.size())
			m_LayerAnimation[SubPath.GetId()].SetCycleType(Value);
	}
	
	inline int AddLocalBoneAnim()
	{
		int Id = m_LocalBoneAnim.size();
		m_LocalBoneAnim.emplace_back();
		return Id;
	}
	
	inline int AddLocalBoneAnimKeyFrame(const CSubPath& SubPath) { return m_LocalBoneAnim[SubPath.GetId()].AddKeyFrame(); }
	
	inline int AddParentBoneAnim()
	{
		int Id = m_ParentBoneAnim.size();
		m_ParentBoneAnim.emplace_back();
		return Id;
	}
	
	inline int AddParentBoneAnimKeyFrame(const CSubPath& SubPath) { return m_ParentBoneAnim[SubPath.GetId()].AddKeyFrame(); }
	
	inline int AddLayerAnimation()
	{
		int Id = m_LayerAnimation.size();
		m_LayerAnimation.emplace_back();
		return Id;
	}
	
	inline int AddLayerAnimationKeyFrame(const CSubPath& SubPath) { return m_LayerAnimation[SubPath.GetId()].AddKeyFrame(); }
	
	inline void AddAtLocalBoneAnim(int Index) { m_LocalBoneAnim.insert(m_LocalBoneAnim.begin() + Index, CAsset_SkeletonAnimation::CBoneAnimation()); }
	
	inline void AddAtLocalBoneAnimKeyFrame(const CSubPath& SubPath, int Index) { m_LocalBoneAnim[SubPath.GetId()].AddAtKeyFrame(Index); }
	
	inline void AddAtParentBoneAnim(int Index) { m_ParentBoneAnim.insert(m_ParentBoneAnim.begin() + Index, CAsset_SkeletonAnimation::CBoneAnimation()); }
	
	inline void AddAtParentBoneAnimKeyFrame(const CSubPath& SubPath, int Index) { m_ParentBoneAnim[SubPath.GetId()].AddAtKeyFrame(Index); }
	
	inline void AddAtLayerAnimation(int Index) { m_LayerAnimation.insert(m_LayerAnimation.begin() + Index, CAsset_SkeletonAnimation::CLayerAnimation()); }
	
	inline void AddAtLayerAnimationKeyFrame(const CSubPath& SubPath, int Index) { m_LayerAnimation[SubPath.GetId()].AddAtKeyFrame(Index); }
	
	inline void DeleteLocalBoneAnim(const CSubPath& SubPath) { m_LocalBoneAnim.erase(m_LocalBoneAnim.begin() + SubPath.GetId()); }
	
	inline void DeleteLocalBoneAnimKeyFrame(const CSubPath& SubPath) { m_LocalBoneAnim[SubPath.GetId()].DeleteKeyFrame(SubPath.PopId()); }
	
	inline void DeleteParentBoneAnim(const CSubPath& SubPath) { m_ParentBoneAnim.erase(m_ParentBoneAnim.begin() + SubPath.GetId()); }
	
	inline void DeleteParentBoneAnimKeyFrame(const CSubPath& SubPath) { m_ParentBoneAnim[SubPath.GetId()].DeleteKeyFrame(SubPath.PopId()); }
	
	inline void DeleteLayerAnimation(const CSubPath& SubPath) { m_LayerAnimation.erase(m_LayerAnimation.begin() + SubPath.GetId()); }
	
	inline void DeleteLayerAnimationKeyFrame(const CSubPath& SubPath) { m_LayerAnimation[SubPath.GetId()].DeleteKeyFrame(SubPath.PopId()); }
	
	inline void RelMoveLocalBoneAnim(const CSubPath& SubPath, int RelMove) { relative_move(m_LocalBoneAnim, SubPath.GetId(), RelMove); }
	
	inline void RelMoveLocalBoneAnimKeyFrame(const CSubPath& SubPath, int RelMove) { m_LocalBoneAnim[SubPath.GetId()].RelMoveKeyFrame(SubPath.PopId(), RelMove); }
	
	inline void RelMoveParentBoneAnim(const CSubPath& SubPath, int RelMove) { relative_move(m_ParentBoneAnim, SubPath.GetId(), RelMove); }
	
	inline void RelMoveParentBoneAnimKeyFrame(const CSubPath& SubPath, int RelMove) { m_ParentBoneAnim[SubPath.GetId()].RelMoveKeyFrame(SubPath.PopId(), RelMove); }
	
	inline void RelMoveLayerAnimation(const CSubPath& SubPath, int RelMove) { relative_move(m_LayerAnimation, SubPath.GetId(), RelMove); }
	
	inline void RelMoveLayerAnimationKeyFrame(const CSubPath& SubPath, int RelMove) { m_LayerAnimation[SubPath.GetId()].RelMoveKeyFrame(SubPath.PopId(), RelMove); }
	
	inline bool IsValidLocalBoneAnim(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_LocalBoneAnim.size()); }
	
	inline bool IsValidLocalBoneAnimKeyFrame(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_LocalBoneAnim.size() && m_LocalBoneAnim[SubPath.GetId()].IsValidKeyFrame(SubPath.PopId())); }
	
	inline bool IsValidParentBoneAnim(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_ParentBoneAnim.size()); }
	
	inline bool IsValidParentBoneAnimKeyFrame(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_ParentBoneAnim.size() && m_ParentBoneAnim[SubPath.GetId()].IsValidKeyFrame(SubPath.PopId())); }
	
	inline bool IsValidLayerAnimation(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_LayerAnimation.size()); }
	
	inline bool IsValidLayerAnimationKeyFrame(const CSubPath& SubPath) const { return (SubPath.IsNotNull() && SubPath.GetId() < m_LayerAnimation.size() && m_LayerAnimation[SubPath.GetId()].IsValidKeyFrame(SubPath.PopId())); }
	
	void AssetPathOperation(const CAssetPath::COperation& Operation)
	{
		Operation.Apply(m_SkeletonPath);
		for(unsigned int i=0; i<m_LocalBoneAnim.size(); i++)
		{
			m_LocalBoneAnim[i].AssetPathOperation(Operation);
		}
		for(unsigned int i=0; i<m_ParentBoneAnim.size(); i++)
		{
			m_ParentBoneAnim[i].AssetPathOperation(Operation);
		}
		for(unsigned int i=0; i<m_LayerAnimation.size(); i++)
		{
			m_LayerAnimation[i].AssetPathOperation(Operation);
		}
	}
	
};

template<> int CAsset_SkeletonAnimation::GetValue(int ValueType, const CSubPath& SubPath, int DefaultValue) const;
template<> bool CAsset_SkeletonAnimation::SetValue(int ValueType, const CSubPath& SubPath, int Value);
template<> CAssetPath CAsset_SkeletonAnimation::GetValue(int ValueType, const CSubPath& SubPath, CAssetPath DefaultValue) const;
template<> bool CAsset_SkeletonAnimation::SetValue(int ValueType, const CSubPath& SubPath, CAssetPath Value);
template<> CSubPath CAsset_SkeletonAnimation::GetValue(int ValueType, const CSubPath& SubPath, CSubPath DefaultValue) const;
template<> bool CAsset_SkeletonAnimation::SetValue(int ValueType, const CSubPath& SubPath, CSubPath Value);

#endif
